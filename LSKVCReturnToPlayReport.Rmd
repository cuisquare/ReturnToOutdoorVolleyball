---
title: "LSKVC Return to Play (Outdoor) Preparation"
author: "Nicolas Vecchione (Powerball Rep)"
date: "`r format(Sys.time(), '%d/%m/%Y')`"
output: 
  pdf_document:
    toc: true
    toc_depth: 2
    number_sections: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

\newpage
# Motivation {-}

This document aims to support LSKVC in their organisation and running of official LSKVC outdoor volleyball sessions returning from the COVID19 hiatus. Its overarching aim is to provide means to reduce the risks of virus propagation, protecting our members and the general population and create the start of a sustainable way to play volleyball during the ongoing pandemic. 

The **Club Requirements Draft** section outlines proposed measures to be put in place by the club in the organisation of outdoor session. The **Players Rules Draft** section outlines what will be sent to players with the expectation of compliance. 

The Club Requirements and Player Rules are made of:

* Rules and obligations as extracted and adapted for our purposes from the Volleyball England document titled "Procedure and Risk Assessments for Outdoor Volleyball Training and Matches
During COVID- 19 Controls" ([link](https://media.volleyballengland.org/docs/Return%20to%20play%20outdoor%20volleyball%20-%20risk%20assessment.pdf))
* Additional specific rules based on our specific Risk Assessment (see below)

The **Risk Assessment** section outlines the specific risk assessment for our activity on top of the Volleyball England Risk Assessment which is generic (references to the Volleyball England documents are at the end of that section). 

The Risk Assessment is based on:

* Volleyball England Return to Outdoor Volleyball Specific Action Plan ([link](https://media.volleyballengland.org/docs/Return%20to%20play%20outdoor%20volleyball%20-%20sport%20specific%20action%20plan.pdf))
* Return to recreational team sport framework ([link](https://www.gov.uk/government/publications/coronavirus-covid-19-guidance-on-phased-return-of-sport-and-recreation/return-to-recreational-team-sport-framework))
* Attendance to VE Webinar Return to Volleyball held on 06/08/20.

The **Logistics Considerations** contains considerations for us to decide on how we can plan to run the session, volunteers required, etc. 

```{r source_functions, echo=FALSE,message=FALSE, warning=FALSE}
options(digits = 2)   # report 3 significant digits

source("Functions.R")

shortnames <- c("CaseDesc",
                "LC",
                "NTM",
                "DS",
                "SF",
                "ET",
                "NTT",
                "NC",
                "ES",
                "NSM",
                "DP",
                "DS")

longnames <- c("Cases Description",
               "court length (metres) - Input",
               "Nb players per team - Input",
               "Set duration (minutes) - Input",
               "Safety Factor",
               "Max Session Virus Exposure (minutes) - Input",
               "Nb players total - Input",
               "Nb courts - Input",
               "Set Virus Exposure (minutes) - Calculated",
               "Max Number of Sets - Calculated",
               "Playtime duration per player - Calculated",
               "Session duration (no breaks) - Calculated")  
definitions <- data.frame(Abbrevation = shortnames, Definition = longnames)
```
```{r max_exposure_definition, echo=FALSE,message=FALSE, warning=FALSE}
max_exposure <- 10
```
```{r safety_factor_definition, echo=FALSE,message=FALSE, warning=FALSE}
safety_factor <- 1.5
```

\newpage
# Club Requirements (Draft)

## Prior to Activity:
* Create a Facebook or Teamer event. This event should come with a description of the session.
* Numbers of players to be capped at **26 players** to allow for 4 spaces reserved for organisers. We should turn down on the day any player turning up putting the total numbers of participants (including those who took part and left) to more than 30. 
* The session should have a clear start and finish set in the facebook/teamer event and be such that club organisers can realistically attend throughout fulfilling their roles managing the session. A reasonable duration would be **4 hours**.
* The invite should include a link to read the players rules (draft written below)
* Roles in setting up /setting down / help run session should be identified
* Procure hand sanitising bottles sufficient for the activity: one home size bottle for each side of the court, one for the seating area, 3 total. Sanitising wipes might be more practical.
* Check that we have up to date contact details for participants, 
* appoint a COVID-19 officer who has responsibility to ensure that all mitigating measures and guidance is followed.
* A risk assessment should have been completed and risk mitigations put in place and monitored. See attached VE risk assessment document.
* all participants are made aware of expected social distancing and hygiene measures during play and whilst at the venue and makes  the risk assessment available to everyone who attends the event to read

## During the activity:
* Remind verbally the player rules prior to start of play (no celebratory touches, no shouting, no touching own mouth/face/nose/eyes)
* Ensure that the player rules below are enforced, on penalty of refusing access to players who either refuse or repeatedly neglect to follow the rules
* Wipe equipment (mainly balls) before and after each set
* Provide sanitising at any time during the play upon player request
* Control the length of sets – **15 points** with 2 points difference or first team to 17 points. 
* Control the number of sets played by individual players – maximum of **`r round(get_max_nb_sets_per_player(8,6,20,safety_factor,max_exposure))` sets** if we play 6v6 (*`r round(get_max_nb_sets_per_player(8,5,20,safety_factor,max_exposure))` sets* total if we play 5v5 and *`r round(get_max_nb_sets_per_player(8,4,20,safety_factor,max_exposure))` sets* total if we play 4v4).
* Control the number of participants. If unregistered participants ask to join on the day, it must be within the 30 cap and they must abide by the rules including provide up to date contact information before they can play. It would be easier organisation wise not to allow unregistered players to join the session unless we have enough organisers to provide that service.

## After the activity:
* encourage all participants to report any infection of their household to the NHS Test and Trace system following participation to limit the spread of the virus.
* collect and disinfect all balls in accordance with the ball manufacturer’s recommendations – available on the Volleyball England website.
* keep a temporary record of participants for 21 days to assist Track and Trace. 
* Have a debrief during the week on how the sessions went (make mental note of how session went or tape it) for lessons learned on how to run the next one

\newpage
# Players Rules (Draft)

## Prior to Activity:
* Let us know you plan to attend the activity. This can be made by replying to the event created on Facebook. Numbers are capped at *26 players*, if you have not let us know you are coming, you will not be able to attend.
* Before you attend you need to opt-in to the present rules, confirming that you read and understood them as well as the risk assessment and agree with the residual risk involved in the activity. Please get in touch if you have any issue understanding the documents.
* Whether in advance or on the day, you have to provide up to date contact information – mobile number as a minimum. This is for track and trace.
* Individuals should bring their own food and drink – water bottles or other refreshment containers should not be shared. 
* You should remember to follow all current UK Government guidances (insert link) This includes most importantly not taking part if you experience any symptoms of Covid19 as well as maintaining social distancing in making your way to the venue.
* Make yourself aware of the attached risk assessment  that those rules are based on:  https://media.volleyballengland.org/docs/Return%20to%20play%20outdoor%20volleyball%20-%20risk%20assessment.pdf

## During Activity:
* Each player will have to sanitise hands before the start and after the end of each set.
* Congratulatory touches are not permitted
* Players should not to touch their face, mouth, nose or eyes. 
* Shouting should be avoided.
* Sets will be capped at **15 points** with 2 points difference or first team to 17 points.
* Each player can play a maximum of **`r round(get_max_nb_sets_per_player(8,6,20,safety_factor,max_exposure))` sets** if we play 6v6 (*`r round(get_max_nb_sets_per_player(8,5,20,safety_factor,max_exposure))` sets* total if we play 5v5 and *`r round(get_max_nb_sets_per_player(8,4,20,safety_factor,max_exposure))` sets* total if we play 4v4).
* Any participants not on court must maintain social distancing. Any seating arrangement (where you keep your stuff) should be 2m away from the next persons. 
* Water and drinks should not be shared

## After the Activity:
* Sanitise your hands after the completion of activity
* Leave the playing area whilst maintaining social distancing.
* If you have not done so yet please provide up to date contact details before leaving. It will be kept for 21 days to provide track and trace 
* If you have suggestions on running the session or observed something you think could be improved especially in terms of safety please get in touch with the organisers

\newpage
# Risk Assessment

## Background

We are looking to adapt the measures from the ones outlined by the return to sport document as a minimum, to one that compensate for aspects of our play that differs from the conditions under which the analysis was made. VE analysis was ran as mandated by gvt Return to Sport. See references for links to those. 

VE study concluded that a normal volleyball game of 6v6 on a 9 by 9 metres court would result in a 1 minutes per 20m set virus exposure for each player, totaling 5 minutes exposure for a full 5 sets game. This was used to justify the exposure risk as being medium as defined by Return to Sport. This approach was accepted and validated by the sport governing body. We have based the risk assessment in the play configurations required to attain a similar level of exposure to the virus as the one in the study.

## Method

An estimation of the virus exposure is derived as a function of the court size, number of players per team and set duration. VE Study was for 6v6 game in a 9 metres x 9 metres court. Basically if the court gets smaller, or the number of players increases, then the exposure increases.

A reference weighted exposure $r_e^*$ is derived by considering duration of exposure per duration of playing time per player per court surface. The values for the Volleyball England study were an exposure time $Te^*=1min$ per set of $T{play}^*=20min$. The court side was $L^*=9m$ and the number of players per team was $N_{team}^*=6$. 


$$r_e^*=\frac{T_e^*}{T_{play}^*\frac{N_{team}^*}{L^{*2}}}$$

To obtain the duration of exposure $Te$ for our specific park activity, we multiply the reference weighted exposure by the parameters corresponding to our specific activity : $T_{play}$ play duration in minutes, court side $L$ in metres and $N_{team}$ the number of players per team.

We also multiply that exposure time by a safety factor equal to `r safety_factor` to account for a scrappier play in the park compared to what was obtained the in VE study which was quoted in the webinar held on 06/08 to be national league finals games.

$$T_e =T_{play}\frac{N_{team}}{L^2}r_e^*S_f$$

Obviously this choice constitutes an educated guess, and the actual exposure time should be validated by observation of typical park play which is an exercise that has not been carried out so far.

Example 1: in the case of a 6v6 play on a 9mx9m court, for a set duration of 15 minutes, the exposure will be $Te^*=$ `r get_set_exposure_VEAsRef(9,6,15,1.0) ` minutes - the exposure is a bit less than the VE reference of 1 minute because  the set is shorter, everything else being equal.

Example 2: in the case of a 6v6 play on a 8mx8m court, for a set duration of 20 minutes, the exposure will be $Te^*=$ `r get_set_exposure_VEAsRef(8,6,20,1.0) ` minutes - the exposure is a bit larger than the VE reference of 1 minute because the court is smaller, everything else being equal.

Example 3: in the case of a 6v6 play on a 8mx8m court, for a set duration of 20 minutes, safety factor of 1.5, the exposure will be $Te^*=$ `r get_set_exposure_VEAsRef(8,6,20,1.5) ` minutes - the exposure is larger than Example 2 because the play is scrappier, everything else being equal.

Based on this it is possible to calculate the maximum advisable number of sets per player depending on the chosen acceptable virus exposure per session. 

$$N_{set}^{max} =\frac{T_{e}^{max}}{T_{set}\frac{N_{team}}{L^2}r_e^*S_f} $$

Example 1 (continued): in the case of a 6v6 play on a 9mx9m court, for a set duration of 15 minutes, the maximum number of sets per player will be $N_{set}^{max}=$ `r get_max_nb_sets_per_player(9,6,15,1.0,5)` sets. This is a bit more than the 5 sets in the VE reference because the sets are shorter, everything else being equal.

Example 2 (continued): in the case of a 6v6 play on a 8mx8m court, for a set duration of 20 minutes, the maximum number of sets per player will be $N_{set}^{max}=$ `r get_max_nb_sets_per_player(8,6,20,1.0,5)` sets. This is a bit less than the 5 sets in the VE reference because the court is smaller, everything else being equal. 

Example 3 (continued): in the case of a 6v6 play on a 8mx8m court, for a set duration of 20 minutes, safety factor of 1.5, the maximum number of sets per player will be $N_{set}^{max}=$ `r get_max_nb_sets_per_player(8,6,20,1.5,5)` sets. This is less than Example 3 because the play is scrappier, everything else being equal. 

As a default in this risk assessment, the acceptable total exposure per session was considered to be **`r max_exposure` minutes**. This compares to the value of *5 minutes* measured for the VE study and *15 minutes* for the Return to Sport maximum for a Medium risk.   

The rationale for that choice is that we want to remain under the value mandated by government for a medium risk (as this is a requirement of return to sport) with some allowance.

It is necessary that the $N_{set}^{max}$ is obtained from the results table below and enforced either organically by a careful choice of session duration and numbers cap or by monitoring as an alternative.

## Results

Below are tables giving $N_{set}^{max}$ (and noted NSM) using the method above for a few choices of number of players per team, number of courts, set duration. 

Please use the column NSM for the maximum recommended number of sets per player for each configuration. 

### Definitions

```{r add_abbreviations_table, echo=FALSE,message=FALSE, warning=FALSE}
#adding abbreviation table
library(knitr)
library(kableExtra)
kable(x=definitions,caption="Acronyms",format = "latex", booktabs = T,linesep = "") %>%
  kable_styling(latex_options = c("striped", "hold_position"))

```

### 30 players

```{r, echo=FALSE,message=FALSE, warning=FALSE}
nb_players <-30
```

```{r generate_play_cases_singlenet_30, echo=FALSE,message=FALSE, warning=FALSE}
#adding input values
play_cases_singlenet <- data.frame() #get_new_play_case_input(9,6,20,5,12,1,"VE STUDY ")

for (nb_player_team in c(4,5,6)) {
  for (set_duration in c(20)){
    for (nb_courts in c(1,2)) {
      play_cases_singlenet <- play_cases_singlenet  %>%  
        bind_rows(get_new_play_case_input(8,
                                          nb_player_team,
                                          set_duration,
                                          safety_factor,
                                          max_exposure,
                                          nb_players,
                                          nb_courts,
                                          "LSKVC "))
    }
  }
}  



#adding calculated values
play_cases_singlenet <- add_calculated_values(play_cases_singlenet)


#rename columns
colnames(play_cases_singlenet) <- shortnames
```

```{r add_results_table_singlenet_30, echo=FALSE,message=FALSE, warning=FALSE}
#adding results table
library(knitr)
library(kableExtra)

kable(x=play_cases_singlenet,format = "latex", booktabs = T,linesep = "",caption="Park Play Configurations - 30 players") %>%
  kable_styling(latex_options = c("striped", "scale_down", "HOLD_position"))%>%
  add_header_above(c(" " = 1, "Inputs" = 7, "Ouputs" = 4)) #%>%  landscape()

``` 

### 24 players

```{r, echo=FALSE,message=FALSE, warning=FALSE}
nb_players <-24
```


```{r generate_play_cases_singlenet_24, echo=FALSE,message=FALSE, warning=FALSE}
#adding input values
play_cases_singlenet <- data.frame() #get_new_play_case_input(9,6,20,5,12,1,"VE STUDY ")

for (nb_player_team in c(4,5,6)) {
  for (set_duration in c(20)){
    for (nb_courts in c(1,2)) {
      play_cases_singlenet <- play_cases_singlenet  %>%  
        bind_rows(get_new_play_case_input(8,
                                          nb_player_team,
                                          set_duration,
                                          safety_factor,
                                          max_exposure,
                                          nb_players,
                                          nb_courts,
                                          "LSKVC "))
    }
  }
}  



#adding calculated values
play_cases_singlenet <- add_calculated_values(play_cases_singlenet)


#rename columns
colnames(play_cases_singlenet) <- shortnames
```

```{r add_results_table_singlenet_24, echo=FALSE,message=FALSE, warning=FALSE}
#adding results table
library(knitr)
library(kableExtra)

kable(x=play_cases_singlenet,format = "latex", booktabs = T,linesep = "",caption="Park Play Configurations - 24 players") %>%
  kable_styling(latex_options = c("striped", "scale_down", "HOLD_position"))%>%
  add_header_above(c(" " = 1, "Inputs" = 7, "Ouputs" = 4)) #%>%  landscape()

``` 

### 12 players

```{r, echo=FALSE,message=FALSE, warning=FALSE}
nb_players <-12
```

```{r generate_play_cases_singlenet_12, echo=FALSE,message=FALSE, warning=FALSE}
#adding input values
play_cases_singlenet <- data.frame() #get_new_play_case_input(9,6,20,5,12,1,"VE STUDY ")

for (nb_player_team in c(4,5,6)) {
  for (set_duration in c(20)){
    for (nb_courts in c(1,2)) {
      play_cases_singlenet <- play_cases_singlenet  %>%  
        bind_rows(get_new_play_case_input(8,
                                          nb_player_team,
                                          set_duration,
                                          safety_factor,
                                          max_exposure,
                                          nb_players,
                                          nb_courts,
                                          "LSKVC "))
    }
  }
}  


#adding calculated values
play_cases_singlenet <- add_calculated_values(play_cases_singlenet)


#rename columns
colnames(play_cases_singlenet) <- shortnames
```

```{r add_results_table_singlenet_12, echo=FALSE,message=FALSE, warning=FALSE}
#adding results table
library(knitr)
library(kableExtra)

kable(x=play_cases_singlenet,format = "latex", booktabs = T,linesep = "",caption="Park Play Configurations - 12 players") %>%
  kable_styling(latex_options = c("striped", "scale_down", "HOLD_position"))%>%
  add_header_above(c(" " = 1, "Inputs" = 7, "Ouputs" = 4)) #%>%  landscape()

``` 

### 8 players
```{r, echo=FALSE,message=FALSE, warning=FALSE}
nb_players <-8
```

```{r generate_play_cases_singlenet_8, echo=FALSE,message=FALSE, warning=FALSE}
#adding input values
play_cases_singlenet <- data.frame() #get_new_play_case_input(9,6,20,5,12,1,"VE STUDY ")

for (nb_player_team in c(4,5,6)) {
  for (set_duration in c(20)){
    for (nb_courts in c(1,2)) {
      play_cases_singlenet <- play_cases_singlenet  %>%  
        bind_rows(get_new_play_case_input(8,
                                          nb_player_team,
                                          set_duration,
                                          safety_factor,
                                          max_exposure,
                                          nb_players,
                                          nb_courts,
                                          "LSKVC "))
    }
  }
}  



#adding calculated values
play_cases_singlenet <- add_calculated_values(play_cases_singlenet)


#rename columns
colnames(play_cases_singlenet) <- shortnames
```

```{r add_results_table_singlenet_8, echo=FALSE,message=FALSE, warning=FALSE}
#adding results table
library(knitr)
library(kableExtra)

kable(x=play_cases_singlenet,format = "latex", booktabs = T,linesep = "",caption="Park Play Configurations - 8 players") %>%
  kable_styling(latex_options = c("striped", "scale_down", "HOLD_position"))%>%
  add_header_above(c(" " = 1, "Inputs" = 7, "Ouputs" = 4)) #%>%  landscape()

``` 

### All configurations
```{r generate_play_cases_ALL, echo=FALSE,message=FALSE, warning=FALSE}
#adding input values
play_cases <- data.frame() #get_new_play_case_input(9,6,20,5,12,1,"VE STUDY ")

for (nb_player_team in c(4,5,6)) {
  for (set_duration in c(20)){
    for (nb_courts in c(1,2)) {
      for (nb_players in c(8,12,24,30)) {
        play_cases <- play_cases  %>%  
          bind_rows(get_new_play_case_input(8,
                                            nb_player_team,
                                            set_duration,
                                            safety_factor,
                                            max_exposure,
                                            nb_players,
                                            nb_courts,
                                            "LSKVC "))          
      }
    }
  }
}  

#adding calculated values
play_cases <- add_calculated_values(play_cases) 


#rename columns
colnames(play_cases) <- shortnames

VE_case <- add_calculated_values(get_new_play_case_input(9,6,20,1,5,12,1,"VE STUDY "))
colnames(VE_case) <- shortnames

play_cases <- bind_rows(VE_case,play_cases)
colnames(play_cases) <- shortnames

```

```{r add_results_table_ALL, echo=FALSE,message=FALSE, warning=FALSE}
#adding results table
library(knitr)
library(kableExtra)

# kable(x=play_cases,format = "latex", booktabs = T,linesep = "",caption="Park Play Configurations - All") %>%
#   kable_styling(latex_options = c("striped", "scale_down", "HOLD_position"))%>%
#   add_header_above(c(" " = 1, "Inputs" = 7, "Ouputs" = 4))

kable(x=play_cases,format = "latex", booktabs = T, longtable = T,linesep = "",caption="Park Play Configurations - All") %>%
  kable_styling(latex_options = c("striped", "scale_down", "HOLD_position","repeat_header"))%>%
  add_header_above(c(" " = 1, "Inputs" = 7, "Ouputs" = 4))

``` 

First line is the case reproducing the results obtained from measurement by Volleyball England which validates the formula used as we obtained 1 minute exposure per set of 20 minutes. The rest are cases calculated specifically for our purpose of park play.


## References and acronyms
[Analysis/return to sport doc link](https://media.volleyballengland.org/docs/Return%20to%20play%20outdoor%20volleyball%20-%20sport%20specific%20action%20plan.pdf )

[Volleyball England Risk assessment link](https://media.volleyballengland.org/docs/Return%20to%20play%20outdoor%20volleyball%20-%20risk%20assessment.pdf) 

[Volleyball England Return to sport webinar  link tbc]() 

[Return to Sport Guidance link](https://www.gov.uk/government/publications/coronavirus-covid-19-guidance-on-phased-return-of-sport-and-recreation/return-to-recreational-team-sport-framework )


\newpage
# Logistics Considerations

## General considerations

The session should have a fixed length because of the requirement for the organisers to be there from start to finish – it would not be reasonable to expect organisers to stay on for a session of unknown length. Capping the number of sets per player would also help on that.

The number of users is capped at 30 total by Return to Sport guidance and this include the organisers on the day. The number of players we can take in will depend on how many organisers run the session. I have set the max number of players to 26 reserving effectively 4 spaces for organisers.

The duration of set is not fixed by duration but based on number of points. Namely all calculations use the figure 20 minutes for a set, which should be achieved by setting the max number of points to 15 points (or first team to 17). This should be monitored on the day to see if the assumption holds well.

## Session possible Configurations

The most manageable configuration for players numbers 24 and above uses 2 nets, as it corresponds to shorter sessions.

It would be potentially a good solution to run several sessions per week including mid week for groups of 8-12 people.

